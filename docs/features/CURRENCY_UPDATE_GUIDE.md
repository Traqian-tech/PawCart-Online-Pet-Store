# 货币单位更新指南 - 已修正为港币

## ✅ 已完成的更改

货币系统已成功更新为**港币（HKD）**作为默认货币和基础货币。

### 更改内容

1. **默认货币**: USD → **HKD（港币）**
2. **基础货币**: USD → **HKD（港币）**
3. **货币符号**: 
   - 港币: `HK$` ✅
   - 美元: `US$` (区分于港币)
4. **汇率基准**: 所有汇率现在相对于港币（HKD = 1.0）

### 货币列表

| 货币 | 代码 | 符号 | 汇率（相对HKD） |
|------|------|------|----------------|
| **港币** | **HKD** | **HK$** | **1.0000** ⭐ 默认 |
| 美元 | USD | US$ | 0.128 |
| 欧元 | EUR | € | 0.119 |
| 英镑 | GBP | £ | 0.101 |
| 人民币 | CNY | ¥ | 0.928 |

---

## 🔧 如何应用更改

### 方法一：清除浏览器缓存（推荐）

如果你看到的仍然是孟加拉塔卡符号（৳）或美元符号（$），请：

#### Chrome / Edge
1. 按 `F12` 打开开发者工具
2. 右键点击刷新按钮
3. 选择 "清空缓存并硬性重新加载"

或者：
1. 按 `F12` 打开开发者工具
2. 点击 "Application" 标签
3. 在左侧找到 "Local Storage"
4. 点击你的网站域名
5. 找到 `currency` 项并删除
6. 刷新页面

#### Firefox
1. 按 `F12` 打开开发者工具
2. 点击 "Storage" 标签
3. 展开 "Local Storage"
4. 点击你的网站域名
5. 找到 `currency` 项并删除
6. 刷新页面

#### Safari
1. 开发 > 显示Web检查器
2. 点击 "Storage" 标签
3. 选择 "Local Storage"
4. 删除 `currency` 项
5. 刷新页面

### 方法二：使用浏览器控制台

1. 按 `F12` 打开开发者工具
2. 点击 "Console" 标签
3. 输入并执行：
```javascript
localStorage.removeItem('currency');
location.reload();
```

### 方法三：完全重置所有设置

在浏览器控制台执行：
```javascript
localStorage.clear();
location.reload();
```

---

## 💰 价格显示示例

假设数据库中的产品价格为 HK$100：

| 选择的货币 | 显示价格 |
|------------|---------|
| 港币 (HKD) | HK$100.00 |
| 美元 (USD) | US$12.80 |
| 欧元 (EUR) | €11.90 |
| 英镑 (GBP) | £10.10 |
| 人民币 (CNY) | ¥92.80 |

---

## 🎯 验证货币设置

更新后，你应该看到：

✅ **正确显示**:
- 默认货币显示: `HK$100.00`
- 筛选价格: `HK$ 1 to HK$ 20000`
- 产品价格: `HK$XXX.XX`

❌ **错误显示** (如果看到这些，需要清除缓存):
- `৳` (孟加拉塔卡)
- `$` (不带HK前缀的美元符号)

---

## 📝 技术细节

### 文件更改
- `client/src/contexts/currency-context.tsx`
  - 默认货币: `HKD`
  - 基础货币: `HKD` (rate: 1.0)
  - 所有汇率重新计算相对于港币

### 汇率参考
基于 2024 年平均汇率：
- 1 HKD = 0.128 USD
- 1 HKD = 0.119 EUR  
- 1 HKD = 0.101 GBP
- 1 HKD = 0.928 CNY

---

## 🔍 故障排除

### 问题：仍然看到 ৳ 符号

**原因**: 浏览器缓存了旧的货币设置

**解决方案**: 
1. 清除 localStorage（见上方方法）
2. 强制刷新页面（Ctrl + Shift + R）

### 问题：价格显示不正确

**原因**: 数据库中的价格可能需要更新

**检查**:
- 确认数据库中价格单位是否为港币
- 如果数据库价格是其他货币，需要运行转换脚本

### 问题：切换货币不生效

**原因**: JavaScript错误或组件未正确更新

**解决方案**:
1. 检查浏览器控制台是否有错误
2. 刷新页面
3. 清除所有缓存

---

## ✅ 测试检查清单

- [ ] 页面默认显示港币（HK$）
- [ ] 筛选价格显示 HK$
- [ ] 产品卡片显示 HK$
- [ ] 可以切换到其他货币
- [ ] 切换后价格正确转换
- [ ] 刷新页面后保持选择的货币

---

## 📞 支持

如有问题，请检查：
1. `client/src/contexts/currency-context.tsx` - 货币配置文件
2. 浏览器控制台是否有错误
3. localStorage中的 `currency` 值

所有货币相关的问题应该已经解决。现在系统默认使用**港币（HK$）**。


